(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],p=0,f=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1819:function(t,e,n){},"257a":function(t,e,n){"use strict";n("d46c")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("el-backtop",{attrs:{target:"#app"}})],1)},a=[],i=n("5530"),s=(n("ac1f"),n("5319"),n("2f62")),c={name:"App",computed:Object(i["a"])({},Object(s["c"])(["token"])),mounted:function(){""===this.token&&this.$router.replace({path:"login",query:{redirect:this.$router.currentRoute.fullPath}})}},u=c,l=(n("034f"),n("2877")),p=Object(l["a"])(u,o,a,!1,null,null,null),f=p.exports,d=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("Login"),t._m(1)],1)},h=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header"},[r("h2",{staticClass:"logo"},[r("img",{attrs:{width:"128",alt:"Vue logo",src:n("cf05")}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{staticClass:"links"},[n("span",[t._v("All rights ")]),n("span",[t._v("reserved by ")]),n("span",[t._v("©Shelton Zhu. ")])]),n("div",{staticClass:"version"},[t._v(" Version 1.0.0-beta-1 ")])])}],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("el-card",[n("h2",[t._v("登 录")]),n("el-form",{ref:"form",staticClass:"login-form",attrs:{model:t.model,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{placeholder:"账号","prefix-icon":"fas fa-user"},model:{value:t.model.username,callback:function(e){t.$set(t.model,"username",e)},expression:"model.username"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{placeholder:"密码",type:"password","prefix-icon":"fas fa-lock"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),n("el-form-item",[n("el-button",{staticClass:"login-button",attrs:{loading:t.loading,type:"primary","native-type":"submit",block:""}},[t._v(" 登录 ")])],1)],1)],1)],1)},v=[],b=n("1da1"),k=(n("96cf"),n("d3b7"),n("b64b"),n("a15b"),n("d81d"),n("bc3a")),w=n.n(k),x={set:function(t,e){localStorage.setItem(t,JSON.stringify(e))},get:function(t){return JSON.parse(localStorage.getItem(t)||"{}")},getForIndex:function(t){return localStorage.key(t)},getKeys:function(){for(var t=this.getAll(),e=[],n=0;n<t.length;n++)e.push(t[n].key);return e},getLength:function(){return localStorage.length},getSupport:function(){return"undefined"!==typeof Storage},remove:function(t){localStorage.removeItem(t)},removeAll:function(){localStorage.clear()},getAll:function(){for(var t=this.getLength(),e=new Array,n=0;n<t;n++){var r=this.getForIndex(n),o=localStorage.getItem(r);e[n]={key:r,val:o}}return e}},_=x;r["default"].use(s["a"]);var y=new s["a"].Store({state:{token:""},mutations:{updateToken:function(t,e){t.token=e,_.set("token",e),console.log("更新token成功！")}},actions:{},modules:{}}),C=w.a.create({baseURL:"http://sheltonzhu.tech:4399",timeout:6e3});C.interceptors.request.use((function(t){var e=y.state.token||_.get("token");return e?t.headers.Authorization=e:st.replace({path:"/login",query:{redirect:st.currentRoute.fullPath}}),t}),(function(t){return Promise.reject(t)})),C.interceptors.response.use((function(t){return t}),(function(t){if(t.response)switch(t.response.status){case 401:y.commit("updateToken",""),st.replace({path:"/login",query:{redirect:st.currentRoute.fullPath}}).then().catch((function(t){console.log(t)}))}return Promise.reject(t)}));var O="/api/v1/app";C.healthBeat=function(){return C.get("/ping")},C.login=function(t,e){return C.post("/auth",{account:t,password:e})},C.ListContainers=function(t){var e="";return t&&Object.keys(t).length>0&&(e="?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")),C.get("".concat(O,"/dockers").concat(e))},C.restartContainer=function(t){return C.post("".concat(O,"/docker/").concat(t,"/restart"))},C.stopContainer=function(t){return C.post("".concat(O,"/docker/").concat(t,"/stop"))};var j=C,S={name:"Login",data:function(){return{model:{username:"",password:""},loading:!1,rules:{username:[{required:!0,message:"用户名必填",trigger:"blur"},{min:5,message:"用户名至少5个字符",trigger:"blur"}],password:[{required:!0,message:"密码必填",trigger:"blur"},{min:5,message:"密码至少5个字符",trigger:"blur"}]}}},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["updateToken"])),{},{simulateLogin:function(){return j.login(this.model.username,this.model.password)},login:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.form.validate();case 3:if(n=e.sent,n){e.next=8;break}return e.abrupt("return",!1);case 8:return t.loading=!0,e.prev=9,e.next=12,t.simulateLogin();case 12:r=e.sent,o=r.data.result.token,t.updateToken(o),t.$message.success("登录成功！"),setTimeout((function(){t.$router.push("/")}),1e3),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](9),t.$message.error("账号或密码不正确！");case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:e.next=29;break;case 27:e.prev=27,e.t1=e["catch"](0);case 29:case"end":return e.stop()}}),e,null,[[0,27],[9,19,22,25]])})))()}})},$=S,R=(n("e44c"),Object(l["a"])($,g,v,!1,null,"4a3eb763",null)),P=R.exports,z={name:"LoginView",components:{Login:P}},I=z,L=(n("572f"),Object(l["a"])(I,m,h,!1,null,"5e82f692",null)),q=L.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"docker-containers"}},[t._l(t.containers,(function(t){return n("ContainerCard",{key:t.Id,staticClass:"containers-div",attrs:{container:t}})})),n("el-drawer",{attrs:{title:"筛选","with-header":!1,visible:t.drawer,direction:"btt",size:"100px"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",{staticClass:"filter-box"},[n("el-checkbox",{model:{value:t.option.all,callback:function(e){t.$set(t.option,"all",e)},expression:"option.all"}},[t._v(" 显示全部 ")]),n("el-checkbox",{model:{value:t.option.size,callback:function(e){t.$set(t.option,"size",e)},expression:"option.size"}},[t._v(" 显示大小 ")]),n("el-input-number",{attrs:{min:0,max:100,size:"mini",label:"显示数量"},model:{value:t.option.limit,callback:function(e){t.$set(t.option,"limit",e)},expression:"option.limit"}})],1)]),n("el-button",{staticClass:"filter-btn",attrs:{type:"primary"},nativeOn:{click:function(e){t.drawer=!0}}},[t._v(" 筛选 ")])],2)},E=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"containers-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h3",{staticClass:"title"},[t._v(" "+t._s(t.container.Image)+" ")])]),n("p",[t._v(t._s(t.container.Names.join("|")))]),n("div",[t._v(t._s(t.container.Status))]),n("p",{staticClass:"time"},[t._v(" "+t._s(new Date(t.container.Created).toLocaleString())+" ")]),"running"===t.container.State?n("el-button",{staticClass:"bottom btn",class:"running"===t.container.State?"btn-stop":"btn-restart",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",block:"",loading:t.loading},nativeOn:{click:function(e){return t.stop(t.container.Id)}}},[t._v(" 停止 ")]):n("el-button",{staticClass:"bottom btn",class:"running"===t.container.State?"btn-stop":"btn-restart",staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",block:"",loading:t.loading},nativeOn:{click:function(e){return t.restart(t.container.Id)}}},[t._v(" 重启 ")])],1)},N=[],J={name:"ContainerCard",props:{container:{type:Object,default:function(){}}},data:function(){return{loading:!1}},methods:{stop:function(t){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,j.stopContainer(t);case 4:e.$parent.init();case 5:return n.prev=5,e.loading=!1,n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))()},restart:function(t){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,j.restartContainer(t);case 4:e.$parent.init();case 5:return n.prev=5,e.loading=!1,n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))()}}},M=J,D=(n("d0c9"),n("257a"),Object(l["a"])(M,T,N,!1,null,"312b1836",null)),U=D.exports,V={name:"Container",mounted:function(){this.init()},components:{ContainerCard:U},data:function(){return{drawer:!1,containers:[],option:{all:!0,size:!0,limit:0}}},computed:{all:function(){return this.option.all},size:function(){return this.option.size},limit:function(){return this.option.limit}},watch:{all:function(){this.init()},size:function(){this.init()},limit:function(){this.init()}},methods:{init:function(){var t=this;this.$nextTick(Object(b["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.ListContainers(t.option);case 2:n=e.sent,t.containers=n.data.result.containers;case 4:case"end":return e.stop()}}),e)}))))}}},F=V,H=(n("e07e"),Object(l["a"])(F,A,E,!1,null,"73066f9a",null)),B=H.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Nav"),n("router-view")],1)},Z=[],G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav"}},[n("el-menu",{attrs:{"default-active":"1-4-1",mode:"horizontal",router:!0},on:{open:t.handleOpen,close:t.handleClose}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-menu"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Docker")])]),n("el-menu-item",{attrs:{index:"/docker"}},[t._v(" 容器 ")])],2),n("el-menu-item",{attrs:{index:"/home"}},[n("i",{staticClass:"el-icon-setting"}),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("设置")])])],1)],1)},Q=[],W={name:"Nav",data:function(){return{isCollapse:!0}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},X=W,Y=(n("8384"),Object(l["a"])(X,G,Q,!1,null,"bc03b0aa",null)),tt=Y.exports,et={name:"Home",mounted:function(){},components:{Nav:tt},data:function(){return{}},methods:{}},nt=et,rt=(n("cccb"),Object(l["a"])(nt,K,Z,!1,null,null,null)),ot=rt.exports;r["default"].use(d["a"]);var at=[{path:"/",name:"Home",component:ot,redirect:"/docker",meta:{requireAuth:!0,title:"主页"},children:[{path:"/docker",name:"docker",meta:{requireAuth:!0,title:"容器列表"},component:B}]},{path:"/login",name:"login",component:q},{path:"/home",name:"home",meta:{requireAuth:!0,title:"主页"},component:ot},{path:"*",component:B}],it=new d["a"]({routes:at});_.get("token")&&y.commit("updateToken",_.get("token")),it.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requireAuth}))?y.state.token?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}));var st=it,ct=n("5c96"),ut=n.n(ct);n("0fae");r["default"].config.productionTip=!1,r["default"].use(ut.a),new r["default"]({router:st,store:y,render:function(t){return t(f)}}).$mount("#app")},"572f":function(t,e,n){"use strict";n("1819")},"5ced":function(t,e,n){},8384:function(t,e,n){"use strict";n("9e2e")},"85ec":function(t,e,n){},"9e26":function(t,e,n){},"9e2e":function(t,e,n){},a8a4:function(t,e,n){},c211:function(t,e,n){},cccb:function(t,e,n){"use strict";n("5ced")},cf05:function(t,e,n){t.exports=n.p+"img/logo.c2bcd048.png"},d0c9:function(t,e,n){"use strict";n("9e26")},d46c:function(t,e,n){},e07e:function(t,e,n){"use strict";n("a8a4")},e44c:function(t,e,n){"use strict";n("c211")}});
//# sourceMappingURL=app.0ca0c432.js.map